# λ‚΄μ¥ μ΄μ ν‚¤ μ„¤μ • κ°€μ΄λ“

naramarketmcp μ„λ²„μ— μ΄μ API ν‚¤λ¥Ό λ‚΄μ¥ν•μ—¬ μ‚¬μ©μκ°€ λ³„λ„λ΅ ν‚¤λ¥Ό μ„¤μ •ν•μ§€ μ•μ•„λ„ μ„λΉ„μ¤λ¥Ό μ΄μ©ν•  μ μλ„λ΅ ν•λ” λ°©λ²•μ…λ‹λ‹¤.

## π” ν‚¤ μ°μ„ μμ„

1. **μ‚¬μ©μ μ κ³µ ν‚¤** (ν™κ²½λ³€μ `NARAMARKET_SERVICE_KEY`)
2. **Smithery.ai μ„¤μ • ν‚¤**
3. **λ‚΄μ¥ μ΄μ ν‚¤** (μλ™ μ‚¬μ©)

## π€ μ΄μ ν‚¤ μ„¤μ • λ°©λ²•

### 1λ‹¨κ³„: μ΄μ ν‚¤ μ¤€λΉ„
- κ³µκ³µλ°μ΄ν„°ν¬ν„Έ(data.go.kr)μ—μ„ λ°κΈ‰λ°›μ€ μ΄μ κ³„μ • API ν‚¤
- ν•λ£¨ 10λ§κ±΄ μ ν•, λ¬΄λ£ μ‚¬μ© κ°€λ¥

### 2λ‹¨κ³„: ν‚¤ μ•”νΈν™”
```bash
cd naramarketmcp
python -c "from src.core.key_utils import setup_production_key; print(setup_production_key('μ‹¤μ _μ΄μ_ν‚¤_μ—¬κΈ°'))"
```

### 3λ‹¨κ³„: μ•”νΈν™”λ ν‚¤ μ„¤μ •
μ„ λ…λ Ήμ–΄ κ²°κ³Όλ¥Ό `src/core/key_utils.py` νμΌμ `get_encrypted_builtin_key()` ν•¨μμ— λ³µμ‚¬:

```python
def get_encrypted_builtin_key() -> str:
    """μ•”νΈν™”λ λ‚΄μ¥ μ΄μ ν‚¤ λ°ν™."""
    actual_key = "μ‹¤μ _μ΄μ_ν‚¤_μ—¬κΈ°"  # <- μ΄ λ¶€λ¶„μ„ μ‹¤μ  ν‚¤λ΅ κµμ²΄
    return simple_encrypt(actual_key)
```

## π“ μ„¤μ • μƒνƒ ν™•μΈ

### μ„λ²„ μƒνƒ ν™•μΈ
```python
# MCP λ„κµ¬λ΅ ν™•μΈ
get_api_key_status()

# λλ” μ§μ ‘ ν™•μΈ
python src/core/key_utils.py
```

### μμƒ μ¶λ ¥
```
=== Key Configuration Status ===
Builtin key configured: True
Encryption working: True

=== API Key Usage ===
Using builtin production API key (length: 40)
```

## π›΅οΈ λ³΄μ• νΉμ§•

- **μ•”νΈν™” μ €μ¥**: XOR + Base64 μ•”νΈν™”λ΅ ν‚¤ λ³΄νΈ
- **ν™κ²½λ³€μ μ°μ„ **: μ‚¬μ©μ ν‚¤κ°€ μμΌλ©΄ μ°μ„  μ‚¬μ©
- **λ΅κΉ… λ³΄μ•**: ν‚¤ κ°’μ€ λ΅κ·Έμ— λ…Έμ¶λμ§€ μ•μ (κΈΈμ΄λ§ ν‘μ‹)
- **ν‚¤ κ²€μ¦**: μ ν¨ν•μ§€ μ•μ€ ν‚¤ μλ™ κ°μ§€

## π’΅ μ‚¬μ©μ κ²½ν—

### ν‚¤ μ—†μ΄ μ‚¬μ© (κ¶μ¥)
```python
# λ³„λ„ μ„¤μ • μ—†μ΄ λ°”λ΅ μ‚¬μ© κ°€λ¥
get_bid_announcement_construction(days_back=7)
```

### κ°μΈ ν‚¤ μ‚¬μ©
```bash
export NARAMARKET_SERVICE_KEY=κ°μΈ_ν‚¤
# λλ” .env νμΌμ— μ„¤μ •
```

## π”§ λ¬Έμ  ν•΄κ²°

### λ‚΄μ¥ ν‚¤κ°€ μ‘λ™ν•μ§€ μ•λ” κ²½μ°
1. `python src/core/key_utils.py` μ‹¤ν–‰
2. "Builtin key configured: False" ν™•μΈ
3. `get_encrypted_builtin_key()` ν•¨μμ `actual_key` κ°’ ν™•μΈ
4. μ‹¤μ  μ΄μ ν‚¤λ΅ κµμ²΄

### μ•”νΈν™”κ°€ μ‘λ™ν•μ§€ μ•λ” κ²½μ°
1. `encryption_working: False` ν™•μΈ
2. Python ν™κ²½ λ° λΌμ΄λΈλ¬λ¦¬ ν™•μΈ
3. ν‚¤ λ¬Έμμ—΄ ν•μ‹ ν™•μΈ (νΉμλ¬Έμ ν¬ν•¨ μ—¬λ¶€)

## π“ μ‚¬μ©λ‰ λ¨λ‹ν„°λ§

- λ‚΄μ¥ ν‚¤ μ‚¬μ©λ‰μ€ κ³µκ³µλ°μ΄ν„°ν¬ν„Έμ—μ„ λ¨λ‹ν„°λ§
- ν•λ£¨ 10λ§κ±΄ μ ν• λ„λ‹¬μ‹ μ‚¬μ©μμ—κ² κ°μΈ ν‚¤ μ„¤μ • μ•λ‚΄
- `server_info()` λ„κµ¬λ΅ ν‚¤ μƒνƒ μ‹¤μ‹κ°„ ν™•μΈ

## β οΈ μ£Όμμ‚¬ν•­

1. **μ‹¤μ  ν‚¤ λ³΄μ•**: `key_utils.py` νμΌμ„ κ³µκ° μ €μ¥μ†μ— μ»¤λ°‹ν•μ§€ λ§μ„Έμ”
2. **ν‚¤ κµμ²΄**: μ£ΌκΈ°μ μΌλ΅ μ΄μ ν‚¤λ¥Ό κµμ²΄ν•κ³  μ•”νΈν™”λ κ°’μ„ μ—…λ°μ΄νΈ
3. **μ‚¬μ©λ‰ κ΄€λ¦¬**: μΌμΌ μ‚¬μ©λ‰μ„ λ¨λ‹ν„°λ§ν•μ—¬ μ ν• μ΄κ³Ό λ°©μ§€
4. **λ°°ν¬μ‹ ν™•μΈ**: λ°°ν¬ μ „ ν‚¤ μ„¤μ • μƒνƒλ¥Ό λ°λ“μ‹ ν™•μΈ

## π― μ¥μ 

- **μ‚¬μ©μ νΈμμ„±**: ν‚¤ μ„¤μ • μ—†μ΄ λ°”λ΅ μ‚¬μ© κ°€λ¥
- **ν™•μ¥μ„±**: μ‚¬μ©μκ°€ κ°μΈ ν‚¤λ¥Ό μ›ν•λ©΄ μ–Έμ λ“  μ„¤μ • κ°€λ¥
- **λ³΄μ•μ„±**: ν‚¤ μ•”νΈν™” μ €μ¥μΌλ΅ λ³΄μ• κ°•ν™”
- **ν¬λ…μ„±**: ν‚¤ μ‚¬μ© μƒνƒλ¥Ό μ‹¤μ‹κ°„μΌλ΅ ν™•μΈ κ°€λ¥